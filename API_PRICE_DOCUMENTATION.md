# API для работы с ценами

## Описание

API предоставляет возможность добавлять и получать цены на услуги для автомастерских. 
Каждая мастерская имеет свою таблицу в схеме `prices` с именем, соответствующим имени пользователя.

## Аутентификация

Все endpoints требуют JWT токен в заголовке Authorization: `Bearer <token>`

## Эндпоинты

### Создание/обновление цены

**POST** `/api/v1/price/`

Создает или обновляет запись цены в таблице текущего пользователя в схеме prices.

#### Параметры запроса (JSON)

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| work_type_children_id | integer | Да | ID типа работы |
| price | number | Да | Цена |

#### Пример запроса

```json
{
  "work_type_children_id": 1,
  "price": 1500.0
}
```

#### Пример ответа

```json
{
  "work_type_children_id": 1,
  "price": 1500.0
}
```

### Получение цены

**GET** `/api/v1/price/{work_type_children_id}`

Получает запись цены по типу работы для текущего пользователя.

#### Параметры пути

| Параметр | Тип | Описание |
|----------|-----|----------|
| work_type_children_id | integer | ID типа работы |

#### Пример ответа

```json
{
  "work_type_children_id": 1,
  "price": 1500.0
}
```

## Ошибки

| Код | Описание |
|-----|----------|
| 401 | Неверный или отсутствующий токен |
| 403 | Нет прав для доступа к ресурсу |
| 404 | Таблица цен для пользователя не найдена или запись не найдена |
| 500 | Ошибка при работе с базой данных |

## Особенности реализации

1. Таблицы создаются автоматически при регистрации пользователя
2. Используется схема `prices` в PostgreSQL
3. Имя таблицы соответствует имени пользователя
4. При конфликте по `work_type_children_id` цена обновляется
5. Аутентификация через JWT токены