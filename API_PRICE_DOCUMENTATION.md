# API для работы с ценами

## Описание

API предоставляет возможность добавлять и получать цены на услуги для автомастерских. 
Каждая мастерская имеет свою таблицу в схеме `prices` с именем, соответствующим имени пользователя.

## Эндпоинты

### Создание/обновление цены

**POST** `/api/v1/price/`

Создает или обновляет запись цены в таблице пользователя в схеме prices.

#### Параметры запроса (JSON)

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| username | string | Да | Имя пользователя (используется как имя таблицы) |
| work_type_children_id | integer | Да | ID типа работы |
| price | number | Да | Цена |

#### Пример запроса

```json
{
  "username": "testuser",
  "work_type_children_id": 1,
  "price": 1500.0
}
```

#### Пример ответа

```json
{
  "work_type_children_id": 1,
  "price": 1500.0
}
```

### Получение цены

**GET** `/api/v1/price/{username}/{work_type_children_id}`

Получает запись цены по типу работы для пользователя.

#### Параметры пути

| Параметр | Тип | Описание |
|----------|-----|----------|
| username | string | Имя пользователя (используется как имя таблицы) |
| work_type_children_id | integer | ID типа работы |

#### Пример ответа

```json
{
  "work_type_children_id": 1,
  "price": 1500.0
}
```

## Ошибки

| Код | Описание |
|-----|----------|
| 404 | Таблица цен для пользователя не найдена |
| 500 | Ошибка при работе с базой данных |

## Особенности реализации

1. Таблицы создаются автоматически при регистрации пользователя
2. Используется схема `prices` в PostgreSQL
3. Имя таблицы соответствует имени пользователя
4. При конфликте по `work_type_children_id` цена обновляется